(function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("alloyfinger"),require("css3transform")):"function"==typeof define&&define.amd?define("PreviewImageCss",["alloyfinger","css3transform"],t):"object"==typeof exports?exports.PreviewImageCss=t(require("alloyfinger"),require("css3transform")):e.PreviewImageCss=t(e.alloyfinger,e.css3transform)})(this,function(e,t){return function(e){function t(m){if(n[m])return n[m].exports;var a=n[m]={i:m,l:!1,exports:{}};return e[m].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,m){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:m})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=6)}([function(e,t,n){"use strict";function m(e,t){return e/t>=1?1:-1}function a(e,t,n,m,r){return a[r+""].apply(null,arguments)}function r(e,t,n,m){return(t-e)*m+e+n}function o(e,t,n){var m=e*n;return m<=t?{min:(t-m)/2,max:(t-m)/2}:{min:t-m,max:0}}function i(e,t,n,m,a){var i=r(t/2,n,m,a),f=o(e,t,a),s=!1;return f.min===f.max?s=0:f.min>i?s=f.min-i+m:f.max<i&&(s=f.max-i+m),s}function f(e,t,n,m,a,r){var o=t-e,i=n-e,f=(i-0)*r+0,s=(i-o)*r+o,l=s-f,u=s+e,c=m*r,g=0,b=a-c;return c<=a?l=0:(u>g&&(l=g-e-f),u<b&&(l=b-e-f)),l}Object.defineProperty(t,"__esModule",{value:!0}),a[1]=function(e,t,n,m){return{w:e,h:m*e/n}},a[-1]=function(e,t,n,m){return{h:t,w:n*t/m}},t.judgeShape=m,t.transformWH=a,t.calculateOffset=f,t.calculatePoint=r,t.calculagteRange=o,t.checkPlace=i},function(e,t,n){"use strict";var m=document.createElement("style");m.innerHTML="\n.loader {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n\n  margin: auto;\n  font-size: 25px;/*px*/\n  width: 1em;\n  height: 1em;\n  border-radius: 50%;\n  \n  text-indent: -9999em;\n  -webkit-animation: load5 1.1s infinite ease;\n  animation: load5 1.1s infinite ease;\n  -webkit-transform: translateZ(0);\n  -ms-transform: translateZ(0);\n  transform: translateZ(0);\n}\n\n@-webkit-keyframes load5 {\n  0%,\n  100% {\n    box-shadow: 0em -2.6em 0em 0em #ffffff, 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2), 2.5em 0em 0 0em rgba(255, 255, 255, 0.2), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2), 0em 2.5em 0 0em rgba(255, 255, 255, 0.2), -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.2), -2.6em 0em 0 0em rgba(255, 255, 255, 0.5), -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.7);\n  }\n  12.5% {\n    box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.7), 1.8em -1.8em 0 0em #ffffff, 2.5em 0em 0 0em rgba(255, 255, 255, 0.2), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2), 0em 2.5em 0 0em rgba(255, 255, 255, 0.2), -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.2), -2.6em 0em 0 0em rgba(255, 255, 255, 0.2), -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.5);\n  }\n  25% {\n    box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.5), 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.7), 2.5em 0em 0 0em #ffffff, 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2), 0em 2.5em 0 0em rgba(255, 255, 255, 0.2), -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.2), -2.6em 0em 0 0em rgba(255, 255, 255, 0.2), -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2);\n  }\n  37.5% {\n    box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.2), 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.5), 2.5em 0em 0 0em rgba(255, 255, 255, 0.7), 1.75em 1.75em 0 0em #ffffff, 0em 2.5em 0 0em rgba(255, 255, 255, 0.2), -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.2), -2.6em 0em 0 0em rgba(255, 255, 255, 0.2), -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2);\n  }\n  50% {\n    box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.2), 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2), 2.5em 0em 0 0em rgba(255, 255, 255, 0.5), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.7), 0em 2.5em 0 0em #ffffff, -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.2), -2.6em 0em 0 0em rgba(255, 255, 255, 0.2), -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2);\n  }\n  62.5% {\n    box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.2), 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2), 2.5em 0em 0 0em rgba(255, 255, 255, 0.2), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.5), 0em 2.5em 0 0em rgba(255, 255, 255, 0.7), -1.8em 1.8em 0 0em #ffffff, -2.6em 0em 0 0em rgba(255, 255, 255, 0.2), -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2);\n  }\n  75% {\n    box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.2), 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2), 2.5em 0em 0 0em rgba(255, 255, 255, 0.2), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2), 0em 2.5em 0 0em rgba(255, 255, 255, 0.5), -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.7), -2.6em 0em 0 0em #ffffff, -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2);\n  }\n  87.5% {\n    box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.2), 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2), 2.5em 0em 0 0em rgba(255, 255, 255, 0.2), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2), 0em 2.5em 0 0em rgba(255, 255, 255, 0.2), -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.5), -2.6em 0em 0 0em rgba(255, 255, 255, 0.7), -1.8em -1.8em 0 0em #ffffff;\n  }\n}\n\n@keyframes load5 {\n  0%,\n  100% {\n    box-shadow: 0em -2.6em 0em 0em #ffffff, 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2), 2.5em 0em 0 0em rgba(255, 255, 255, 0.2), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2), 0em 2.5em 0 0em rgba(255, 255, 255, 0.2), -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.2), -2.6em 0em 0 0em rgba(255, 255, 255, 0.5), -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.7);\n  }\n  12.5% {\n    box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.7), 1.8em -1.8em 0 0em #ffffff, 2.5em 0em 0 0em rgba(255, 255, 255, 0.2), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2), 0em 2.5em 0 0em rgba(255, 255, 255, 0.2), -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.2), -2.6em 0em 0 0em rgba(255, 255, 255, 0.2), -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.5);\n  }\n  25% {\n    box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.5), 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.7), 2.5em 0em 0 0em #ffffff, 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2), 0em 2.5em 0 0em rgba(255, 255, 255, 0.2), -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.2), -2.6em 0em 0 0em rgba(255, 255, 255, 0.2), -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2);\n  }\n  37.5% {\n    box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.2), 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.5), 2.5em 0em 0 0em rgba(255, 255, 255, 0.7), 1.75em 1.75em 0 0em #ffffff, 0em 2.5em 0 0em rgba(255, 255, 255, 0.2), -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.2), -2.6em 0em 0 0em rgba(255, 255, 255, 0.2), -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2);\n  }\n  50% {\n    box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.2), 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2), 2.5em 0em 0 0em rgba(255, 255, 255, 0.5), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.7), 0em 2.5em 0 0em #ffffff, -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.2), -2.6em 0em 0 0em rgba(255, 255, 255, 0.2), -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2);\n  }\n  62.5% {\n    box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.2), 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2), 2.5em 0em 0 0em rgba(255, 255, 255, 0.2), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.5), 0em 2.5em 0 0em rgba(255, 255, 255, 0.7), -1.8em 1.8em 0 0em #ffffff, -2.6em 0em 0 0em rgba(255, 255, 255, 0.2), -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2);\n  }\n  75% {\n    box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.2), 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2), 2.5em 0em 0 0em rgba(255, 255, 255, 0.2), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2), 0em 2.5em 0 0em rgba(255, 255, 255, 0.5), -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.7), -2.6em 0em 0 0em #ffffff, -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2);\n  }\n  87.5% {\n    box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.2), 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2), 2.5em 0em 0 0em rgba(255, 255, 255, 0.2), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2), 0em 2.5em 0 0em rgba(255, 255, 255, 0.2), -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.5), -2.6em 0em 0 0em rgba(255, 255, 255, 0.7), -1.8em -1.8em 0 0em #ffffff;\n  }\n}\n\n.pr__load--err{\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n\n  margin: auto;\n\n  height: 1.2em;\n  line-height: 1.2em;\n  font-size: 1.6em;/*px*/\n  text-align: center;\n\n  color: #ffffff;\n}\n",document.head.appendChild(m)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(){for(var e=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var n=(new Date).getTime(),m=Math.max(0,16-(n-e)),a=window.setTimeout(function(){t(n+m)},m);return e=n+m,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();var m=function e(t,n,m,a,r,o,i){var f=t[n],s=m-f,l=new Date,u=this,c=r||function(e){return e};this.tickID=null,function e(){var r=new Date-l;if(r>=a)return t[n]=m,i&&i(m),o&&o(m),cancelAnimationFrame(u.tickID),void(u.toTick=null);t[n]=s*c(r/a)+f,u.tickID=requestAnimationFrame(e),i&&i(t[n])}(),e.List.push(this)};m.List=[],m.stopAll=function(){for(var e=0,t=m.List.length;e<t;e++)cancelAnimationFrame(m.List[e].tickID);m.List.length=0},m.stop=function(e){cancelAnimationFrame(e.tickID)},t.default=m},function(e,t,n){"use strict";function m(e){return"object"===("undefined"==typeof HTMLElement?"undefined":f(HTMLElement))?e instanceof HTMLElement:e&&"object"===(void 0===e?"undefined":f(e))&&1===e.nodeType&&"string"==typeof e.nodeName}function a(e,t){if("object"===(void 0===t?"undefined":f(t)))for(var n in t)e.style[n]=t[n]}function r(e){var t=document.createElement("img");return t.addEventListener("load",function(e){r.AFTER_HOOK&&r.AFTER_HOOK(null,t),r.AFTER_HOOK=null}),t.addEventListener("error",function(e){var n=new Error("图片加载失败");r.AFTER_HOOK&&r.AFTER_HOOK(n,t),r.AFTER_HOOK=null}),t.src=e,r}function o(e,t,n){var r=document.createElement(e);return t&&a(r,t),n&&m(n)&&r.appendChild(n),r}function i(e){return Math.sqrt(1-Math.pow(e-1,2))}Object.defineProperty(t,"__esModule",{value:!0});var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r.after=function(e){r.AFTER_HOOK=e},t.isDom=m,t.setStyle=a,t.pullImage=r,t.createElement=o,t.ease=i},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var m=t[n];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(e,m.key,m)}}return function(t,n,m){return n&&e(t.prototype,n),m&&e(t,m),t}}(),i=n(4),f=a(i),s=n(5),l=a(s),u=n(3),c=m(u),g=n(2),b=a(g),d=n(0),h=m(d);n(1);var p={imageSrc:"",doubleZoom:2,maxZoom:4,minZoom:1,softX:!0,softY:!0},w=function(){function e(t,n){var m=this;r(this,e),c.isDom(t)&&(this.options=n||{},this.context=t,this.conBox=t.getBoundingClientRect(),c.setStyle(this.context,{position:"relative"}),this.loading("start"),c.pullImage(this.options.imageSrc).after(function(e,t){if(m.loading("end"),e)return void m.err();m.element=t,m.start()}))}return o(e,[{key:"start",value:function(){if(!this.element)return this.callStart=!0;var e=h.judgeShape(this.element.width,this.element.height),t=h.transformWH(this.context.clientWidth,this.context.clientHeight,this.element.width,this.element.height,e),n=t.w,m=t.h,a=e===-1?0:window.innerHeight/2-m/2,r=1===e?0:window.innerWidth/2-n/2;c.setStyle(this.element,{position:"absolute",width:n+"px",height:m+"px",top:a+"px",left:r+"px"}),this.elBox=this.element.getBoundingClientRect(),this.leftPx=r,this.topPx=a,(0,l.default)(this.element),this.bind()}},{key:"loading",value:function(e){"start"===e&&(this.loadingDom||(this.loadingDom=document.createElement("div"),this.loadingDom.className="loader"),this.context.appendChild(this.loadingDom)),"end"===e&&this.context.removeChild(this.loadingDom)}},{key:"err",value:function(){this.errDom||(this.errDom=document.createElement("p"),this.errDom.className="pr__load--err",this.errDom.innerHTML="图片加载失败"),this.context.appendChild(this.errDom)}},{key:"bind",value:function(){var e=this.element,t=this.options.minZoom,n=this.options.maxZoom,m=this.elBox,a=this.conBox,r=this,o=this.leftPx,i=this.topPx,s=c.ease,l=1,u=!1;this.gesture=new f.default(this.context,{multipointStart:function(){b.default.stopAll(),l=e.scaleX},pinch:function(t){e.scaleX=e.scaleY=l*t.scale},multipointEnd:function(){e.scaleX<t&&(new b.default(e,"scaleX",t,500,s),new b.default(e,"scaleY",t,500,s)),e.scaleX>n&&(new b.default(e,"scaleX",n,500,s),new b.default(e,"scaleY",n,500,s))},pressMove:function(t){b.default.stopAll(),u=!0;var n=r.options.softX,f=r.options.softY;if(n)e.translateX+=t.deltaX;else{h.checkPlace(m.width,a.width,o,e.translateX+t.deltaX,e.scaleX)===!1&&(e.translateX+=t.deltaX)}if(f)e.translateY+=t.deltaY;else{h.checkPlace(m.height,a.height,i,e.translateY,e.scaleY)===!1&&(e.translateY+=t.deltaY)}t.preventDefault()},touchEnd:function(){if(u){var t=h.checkPlace(m.height,a.height,i,e.translateY,e.scaleY),n=h.checkPlace(m.width,a.width,o,e.translateX,e.scaleX);t!==!1&&new b.default(e,"translateY",t,400,s),n!==!1&&new b.default(e,"translateX",n,400,s)}u=!1},doubleTap:function(n){b.default.stopAll();var f=r.options.doubleZoom,l=(t+f)/2,u=200;if(e.scaleX>l)new b.default(e,"scaleX",t,u,s),new b.default(e,"scaleY",t,u,s),new b.default(e,"translateX",0,u,s),new b.default(e,"translateY",0,u,s);else{var c=a.width/2,g=a.height/2,d=[n.changedTouches[0].pageX,n.changedTouches[0].pageY],p=d[0],w=d[1],x=h.calculateOffset(c,p,o,m.width,a.width,f),v=h.calculateOffset(g,w,i,m.height,a.height,f);new b.default(e,"scaleX",f,u,s),new b.default(e,"scaleY",f,u,s),new b.default(e,"translateX",x,u,s),new b.default(e,"translateY",v,u,s)}}})}},{key:"unbind",value:function(){this.gesture=this.gesture.destroy()}},{key:"options",get:function(){return this._options},set:function(e){this._options=Object.assign(p,e)}},{key:"element",get:function(){return this._element},set:function(e){this._element||(this._element=e,this.context.appendChild(this.element))}}]),e}();t.default=w}])});